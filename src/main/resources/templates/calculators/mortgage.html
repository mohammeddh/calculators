<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: layout(~{::content})}">

<div th:fragment="content">
    <header class="text-center mb-12 pb-8 border-b border-brand-gray">
        <h1 class="text-3xl md:text-4xl font-bold text-brand-black mb-4">Mortgage Calculator</h1>
        <p class="text-lg text-brand-blue max-w-2xl mx-auto">
            Calculate your monthly mortgage payments, total interest, and view detailed amortization schedules.
        </p>
    </header>

    <div class="grid lg:grid-cols-2 gap-8 mb-12">
        <!-- Calculator Form -->
        <div class="bg-gray-50 border border-brand-gray rounded-xl p-6">
            <form id="mortgage-form" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="loan-amount" class="block text-sm font-semibold text-brand-black mb-2">Loan Amount</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500 text-sm">$</span>
                            <input type="number" id="loan-amount" name="loanAmount"
                                   class="w-full pl-8 pr-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="300000" min="1000" max="10000000" step="1000" required>
                        </div>
                    </div>

                    <div>
                        <label for="interest-rate" class="block text-sm font-semibold text-brand-black mb-2">Interest Rate</label>
                        <div class="relative">
                            <input type="number" id="interest-rate" name="interestRate"
                                   class="w-full pl-4 pr-8 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="6.5" min="0.1" max="30" step="0.01" required>
                            <span class="absolute right-3 top-3 text-gray-500 text-sm">%</span>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="loan-term" class="block text-sm font-semibold text-brand-black mb-2">Loan Term</label>
                        <select id="loan-term" name="loanTerm"
                                class="w-full px-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors">
                            <option value="15">15 years</option>
                            <option value="20">20 years</option>
                            <option value="25">25 years</option>
                            <option value="30" selected>30 years</option>
                        </select>
                    </div>

                    <div>
                        <label for="down-payment" class="block text-sm font-semibold text-brand-black mb-2">Down Payment</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500 text-sm">$</span>
                            <input type="number" id="down-payment" name="downPayment"
                                   class="w-full pl-8 pr-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="60000" min="0" step="1000">
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="property-tax" class="block text-sm font-semibold text-brand-black mb-2">Annual Property Tax</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500 text-sm">$</span>
                            <input type="number" id="property-tax" name="propertyTax"
                                   class="w-full pl-8 pr-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="3600" min="0" step="100">
                        </div>
                    </div>

                    <div>
                        <label for="home-insurance" class="block text-sm font-semibold text-brand-black mb-2">Annual Home Insurance</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500 text-sm">$</span>
                            <input type="number" id="home-insurance" name="homeInsurance"
                                   class="w-full pl-8 pr-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="1200" min="0" step="100">
                        </div>
                    </div>
                </div>

                <div>
                    <label class="flex items-center space-x-3">
                        <input type="checkbox" id="pmi" name="pmi" checked
                               class="w-4 h-4 text-brand-orange border-brand-gray rounded focus:ring-brand-orange">
                        <span class="text-sm font-semibold text-brand-black">Include PMI (Private Mortgage Insurance)</span>
                    </label>
                    <p class="text-xs text-gray-500 mt-1 ml-7">Usually required when down payment is less than 20%</p>
                </div>

                <button type="submit" class="w-full bg-brand-orange text-white font-semibold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors duration-200 transform hover:scale-105">
                    Calculate Payment
                </button>
            </form>
        </div>

        <!-- Results -->
        <div class="bg-white border border-brand-gray rounded-xl p-6">
            <div id="mortgage-results" class="space-y-6">
                <div>
                    <h3 class="text-lg font-semibold text-brand-black mb-4 pb-2 border-b-2 border-brand-orange">Monthly Payment Breakdown</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Principal & Interest</span>
                            <span class="text-sm font-semibold text-brand-black" id="principal-interest">$1,798</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Property Tax</span>
                            <span class="text-sm font-semibold text-brand-black" id="monthly-tax">$300</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Home Insurance</span>
                            <span class="text-sm font-semibold text-brand-black" id="monthly-insurance">$100</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">PMI</span>
                            <span class="text-sm font-semibold text-brand-black" id="monthly-pmi">$150</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-brand-orange/10 rounded-lg border border-brand-orange">
                            <span class="text-sm font-semibold text-brand-orange">Total Monthly Payment</span>
                            <span class="text-sm font-bold text-brand-orange" id="total-payment">$2,348</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-brand-black mb-4">Loan Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Total Loan Amount</span>
                            <span class="text-sm font-semibold text-brand-black" id="total-loan">$240,000</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Total Interest Paid</span>
                            <span class="text-sm font-semibold text-brand-black" id="total-interest">$407,280</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Total Cost</span>
                            <span class="text-sm font-semibold text-brand-black" id="total-cost">$647,280</span>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 border border-brand-gray rounded-lg p-4">
                    <h3 class="text-base font-semibold text-brand-black mb-3 text-center">Payment Breakdown</h3>
                    <canvas id="payment-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Amortization Schedule -->
    <div class="bg-gray-50 border border-brand-gray rounded-xl p-6">
        <h3 class="text-lg font-semibold text-brand-black mb-6 pb-2 border-b-2 border-brand-orange">
            Amortization Schedule (First 12 Months)
        </h3>
        <div class="overflow-x-auto">
            <table id="amortization-table" class="w-full bg-white rounded-lg border border-brand-gray">
                <thead>
                <tr class="bg-gray-100">
                    <th class="px-4 py-3 text-center text-xs font-semibold text-brand-black border-b border-brand-gray">Payment #</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-brand-black border-b border-brand-gray">Payment Date</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Payment Amount</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Principal</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Interest</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Remaining Balance</th>
                </tr>
                </thead>
                <tbody>
                <!-- Populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
</div>

</html>