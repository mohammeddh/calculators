<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: layout(~{::content})}">

<div th:fragment="content">
    <header class="text-center mb-12 pb-8 border-b border-brand-gray">
        <h1 class="text-3xl md:text-4xl font-bold text-brand-black mb-4">Loan Calculator</h1>
        <p class="text-lg text-brand-blue max-w-2xl mx-auto">
            Calculate loan payments, interest rates, and repayment schedules for personal loans, auto loans, and more.
        </p>
    </header>

    <div class="grid lg:grid-cols-2 gap-8 mb-12">
        <!-- Calculator Form -->
        <div class="bg-gray-50 border border-brand-gray rounded-xl p-6">
            <form id="loan-form" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="loan-amount" class="block text-sm font-semibold text-brand-black mb-2">Loan Amount</label>
                        <div class="relative">
                            <span class="absolute left-3 top-3 text-gray-500 text-sm">$</span>
                            <input type="number" id="loan-amount" name="loanAmount"
                                   class="w-full pl-8 pr-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="25000" min="100" max="1000000" step="100" required>
                        </div>
                    </div>

                    <div>
                        <label for="interest-rate" class="block text-sm font-semibold text-brand-black mb-2">Annual Interest Rate</label>
                        <div class="relative">
                            <input type="number" id="interest-rate" name="interestRate"
                                   class="w-full pl-4 pr-8 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors"
                                   value="7.5" min="0.1" max="30" step="0.01" required>
                            <span class="absolute right-3 top-3 text-gray-500 text-sm">%</span>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label for="loan-term" class="block text-sm font-semibold text-brand-black mb-2">Loan Term</label>
                        <select id="loan-term" name="loanTerm"
                                class="w-full px-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors">
                            <option value="12">1 year</option>
                            <option value="24">2 years</option>
                            <option value="36">3 years</option>
                            <option value="48">4 years</option>
                            <option value="60" selected>5 years</option>
                            <option value="84">7 years</option>
                            <option value="120">10 years</option>
                        </select>
                    </div>

                    <div>
                        <label for="payment-frequency" class="block text-sm font-semibold text-brand-black mb-2">Payment Frequency</label>
                        <select id="payment-frequency" name="paymentFrequency"
                                class="w-full px-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors">
                            <option value="monthly" selected>Monthly</option>
                            <option value="biweekly">Bi-weekly</option>
                            <option value="weekly">Weekly</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label for="loan-type" class="block text-sm font-semibold text-brand-black mb-2">Loan Type</label>
                    <select id="loan-type" name="loanType"
                            class="w-full px-4 py-3 border border-brand-gray rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-brand-orange transition-colors">
                        <option value="personal">Personal Loan</option>
                        <option value="auto" selected>Auto Loan</option>
                        <option value="home-equity">Home Equity Loan</option>
                        <option value="student">Student Loan</option>
                        <option value="business">Business Loan</option>
                    </select>
                </div>

                <button type="submit" class="w-full bg-brand-orange text-white font-semibold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors duration-200 transform hover:scale-105">
                    Calculate Payment
                </button>
            </form>
        </div>

        <!-- Results -->
        <div class="bg-white border border-brand-gray rounded-xl p-6">
            <div id="loan-results" class="space-y-6">
                <div>
                    <h3 class="text-lg font-semibold text-brand-black mb-4 pb-2 border-b-2 border-brand-orange">Payment Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Monthly Payment</span>
                            <span class="text-sm font-semibold text-brand-black" id="monthly-payment">$503.26</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-brand-gray">
                            <span class="text-sm font-medium text-brand-blue">Total Interest Paid</span>
                            <span class="text-sm font-semibold text-brand-black" id="total-interest">$5,195.60</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-brand-orange/10 rounded-lg border border-brand-orange">
                            <span class="text-sm font-semibold text-brand-orange">Total Amount Paid</span>
                            <span class="text-sm font-bold text-brand-orange" id="total-amount">$30,195.60</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-brand-black mb-4">Loan Details</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-3 rounded-lg border border-brand-gray text-center">
                            <div class="text-xs text-brand-blue mb-1">Principal Amount</div>
                            <div class="text-sm font-semibold text-brand-black" id="principal-amount">$25,000</div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border border-brand-gray text-center">
                            <div class="text-xs text-brand-blue mb-1">Annual Rate</div>
                            <div class="text-sm font-semibold text-brand-black" id="annual-rate">7.50%</div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border border-brand-gray text-center">
                            <div class="text-xs text-brand-blue mb-1">Loan Term</div>
                            <div class="text-sm font-semibold text-brand-black" id="loan-duration">5 years</div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded-lg border border-brand-gray text-center">
                            <div class="text-xs text-brand-blue mb-1">Total Payments</div>
                            <div class="text-sm font-semibold text-brand-black" id="number-payments">60</div>
                        </div>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="bg-gray-50 border border-brand-gray rounded-lg p-4">
                    <h3 class="text-base font-semibold text-brand-black mb-3 text-center">Payment Breakdown</h3>
                    <canvas id="loan-chart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Schedule -->
    <div class="bg-gray-50 border border-brand-gray rounded-xl p-6">
        <h3 class="text-lg font-semibold text-brand-black mb-6 pb-2 border-b-2 border-brand-orange">
            Payment Schedule
        </h3>
        <div class="overflow-x-auto">
            <table id="payment-schedule-table" class="w-full bg-white rounded-lg border border-brand-gray">
                <thead>
                <tr class="bg-gray-100">
                    <th class="px-4 py-3 text-center text-xs font-semibold text-brand-black border-b border-brand-gray">Payment #</th>
                    <th class="px-4 py-3 text-left text-xs font-semibold text-brand-black border-b border-brand-gray">Payment Date</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Payment Amount</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Principal</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Interest</th>
                    <th class="px-4 py-3 text-right text-xs font-semibold text-brand-black border-b border-brand-gray">Remaining Balance</th>
                </tr>
                </thead>
                <tbody>
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-center text-sm text-brand-black border-b border-brand-gray/50">1</td>
                    <td class="px-4 py-3 text-left text-sm text-brand-black border-b border-brand-gray/50">Jan 2025</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$503.26</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$346.60</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$156.66</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$24,653.40</td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-center text-sm text-brand-black border-b border-brand-gray/50">2</td>
                    <td class="px-4 py-3 text-left text-sm text-brand-black border-b border-brand-gray/50">Feb 2025</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$503.26</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$348.77</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$154.49</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$24,304.63</td>
                </tr>
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-center text-sm text-brand-black border-b border-brand-gray/50">3</td>
                    <td class="px-4 py-3 text-left text-sm text-brand-black border-b border-brand-gray/50">Mar 2025</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$503.26</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$350.95</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$152.31</td>
                    <td class="px-4 py-3 text-right text-sm text-brand-black border-b border-brand-gray/50">$23,953.68</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

</html>