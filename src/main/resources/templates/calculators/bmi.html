<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/base :: layout(~{::content})}">

<div th:fragment="content">
    <header class="text-center mb-8 lg:mb-12 pb-6 border-b border-gray-200">
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-text-primary mb-3 lg:mb-4 px-4">BMI Calculator</h1>
        <p class="text-base lg:text-lg text-text-secondary max-w-2xl mx-auto px-4">Calculate your Body Mass Index (BMI) and understand your weight status with our easy-to-use calculator.</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-8">
        <!-- Calculator Form -->
        <div class="bg-white/50 p-4 sm:p-6 rounded-xl border border-gray-200 order-2 lg:order-1">
            <h2 class="text-lg font-semibold text-text-primary mb-4 lg:mb-6">Calculate Your BMI</h2>
            <form id="bmi-form" class="space-y-4 lg:space-y-6">
                <div>
                    <label for="unit" class="block text-sm font-semibold text-text-primary mb-2">Unit System</label>
                    <select id="unit" name="unit"
                            class="w-full px-4 py-2.5 lg:py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                        <option value="metric">Metric (kg, cm)</option>
                        <option value="imperial">Imperial (lbs, inches)</option>
                    </select>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="weight" class="block text-sm font-semibold text-text-primary mb-2">Weight</label>
                        <div class="relative">
                            <input type="number" id="weight" name="weight"
                                   class="w-full px-4 py-2.5 lg:py-3 pr-12 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                   value="70" min="1" max="1000" step="0.1" required>
                            <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-text-muted text-sm font-medium pointer-events-none" id="weight-unit">kg</span>
                        </div>
                    </div>

                    <div>
                        <label for="height" class="block text-sm font-semibold text-text-primary mb-2">Height</label>
                        <div class="relative">
                            <input type="number" id="height" name="height"
                                   class="w-full px-4 py-2.5 lg:py-3 pr-12 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                   value="175" min="1" max="300" step="0.1" required>
                            <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-text-muted text-sm font-medium pointer-events-none" id="height-unit">cm</span>
                        </div>
                    </div>
                </div>

                <button type="submit" class="w-full px-6 py-3 bg-primary-500 text-white font-semibold rounded-lg transition-all duration-200 hover:bg-primary-600 hover:-translate-y-0.5 hover:shadow-md">
                    Calculate BMI
                </button>
            </form>
        </div>

        <!-- Results -->
        <div class="bg-white/50 p-4 sm:p-6 rounded-xl border border-gray-200 order-1 lg:order-2">
            <h2 class="text-lg font-semibold text-text-primary mb-4 lg:mb-6">Your Results</h2>
            <div id="bmi-results">
                <div class="text-center p-6 lg:p-8 bg-primary-50 rounded-xl border-2 border-primary-500 mb-4 lg:mb-6">
                    <div class="text-3xl lg:text-4xl font-bold text-primary-500 mb-2" id="bmi-result">22.9</div>
                    <div class="text-lg lg:text-xl font-semibold text-text-primary mb-2" id="bmi-category">Normal weight</div>
                    <div class="text-xs lg:text-sm text-text-secondary max-w-sm mx-auto leading-relaxed" id="bmi-advice">Maintain your healthy lifestyle with balanced diet and regular exercise.</div>
                </div>

                <div class="bg-gray-100 p-3 lg:p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-text-primary mb-3 lg:mb-4 text-sm lg:text-base">BMI Categories</h4>
                    <div class="category-list space-y-2">
                        <div class="flex justify-between items-center p-2 lg:p-2.5 bg-white rounded border border-gray-200">
                            <span class="text-xs lg:text-sm font-medium text-text-primary">Underweight</span>
                            <span class="text-xs lg:text-sm text-text-secondary">Below 18.5</span>
                        </div>
                        <div class="flex justify-between items-center p-2 lg:p-2.5 bg-white rounded border border-gray-200">
                            <span class="text-xs lg:text-sm font-medium text-text-primary">Normal weight</span>
                            <span class="text-xs lg:text-sm text-text-secondary">18.5 - 24.9</span>
                        </div>
                        <div class="flex justify-between items-center p-2 lg:p-2.5 bg-white rounded border border-gray-200">
                            <span class="text-xs lg:text-sm font-medium text-text-primary">Overweight</span>
                            <span class="text-xs lg:text-sm text-text-secondary">25.0 - 29.9</span>
                        </div>
                        <div class="flex justify-between items-center p-2 lg:p-2.5 bg-white rounded border border-gray-200">
                            <span class="text-xs lg:text-sm font-medium text-text-primary">Obese</span>
                            <span class="text-xs lg:text-sm text-text-secondary">30.0 and above</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Update units when system changes
    document.addEventListener('DOMContentLoaded', () => {
        const unitSelect = document.querySelector('#unit');
        const weightUnit = document.querySelector('#weight-unit');
        const heightUnit = document.querySelector('#height-unit');
        const weightInput = document.querySelector('#weight');
        const heightInput = document.querySelector('#height');

        if (unitSelect && weightUnit && heightUnit && weightInput && heightInput) {
            unitSelect.addEventListener('change', (e) => {
                if (e.target.value === 'metric') {
                    weightUnit.textContent = 'kg';
                    heightUnit.textContent = 'cm';
                    weightInput.value = '70';
                    heightInput.value = '175';
                } else {
                    weightUnit.textContent = 'lbs';
                    heightUnit.textContent = 'in';
                    weightInput.value = '154';
                    heightInput.value = '69';
                }
            });
        }
    });
</script>

</html>